!function(t){var e={};function s(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e,s){t.exports=s.p+"fcbd978c2aad68641b996e67994632e6.png"},function(t,e,s){"use strict";s.r(e);var a=s(0),i=s.n(a),r=64,h=48,n=document.getElementById("canvas");n.style.width="800px",n.style.height="600px";var o=n.getContext("2d"),y=new Image;y.src=i.a;var d=16,c=16,f=5,l=new function(){for(this.data=[],a=0;a<f;a++){this.data.push([]);for(var t=0;t<c;t++){this.data[a].push([]);for(var e=0;e<d;e++){var s=new v;s.x=64*e,s.z=64*t,s.y=48*a,s.type=3,this.data[a][t].push(s)}}}for(a=0;a<1;a++)for(var t=0;t<c;t++)for(var e=0;e<d;e++)this.data[a][t][e].type=2;for(a=1;a<2;a++)for(var t=0;t<c;t++)for(var e=0;e<d;e++)this.data[a][t][e].type=1;for(a=2;a<3;a++)for(var t=0;t<c;t++)for(var e=0;e<d;e++)this.data[a][t][e].type=0==Math.floor(6*Math.random())?1:3,this.data[a-1][t][e].type=1==this.data[a][t][e].type?2:this.data[a-1][t][e].type;for(a=1;a<2;a++)for(var t=0;t<c;t++)for(var e=0;e<d;e++)1==this.data[a][t][e].type&&0==Math.floor(6*Math.random())&&(this.data[a+1][t][e].type=4,this.data[a+1][t][e].solid=!0,this.data[a+2][t][e].type=5,this.data[a+2][t][e].solid=!0);for(var a=0;a<this.data.length;a++)for(var t=0;t<this.data[a].length;t++)for(var e=0;e<this.data[a][t].length;e++){var s=this.data[a][t][e];0!=s.type&&1!=s.type&&2!=s.type&&4!=s.type&&5!=s.type||(s.solid=!0)}this.render=function(){for(var t=0;t<this.data.length;t++)for(var e=0;e<this.data[t].length;e++)for(var s=0;s<this.data[t][e].length;s++)this.data[t][e][s].render()},this.getTileAtPosition=function(t,e,s){return!(t<0||e<0||s<0||t>64*(d-1)||s>64*(c-1)||e>48*(f-1))&&this.data[Math.floor(e/48)][Math.floor(s/64)][Math.floor(t/64)]},this.getRenderData=function(){for(var t=[],e=0;e<this.data.length;e++)for(var s=0;s<this.data[e].length;s++)for(var a=0;a<this.data[e][s].length;a++)t.push(this.data[e][s][a]);return t}},k=new function(){this.x=0,this.y=240,this.z=0,this.vx=0,this.vy=0,this.vz=0,this.lastMove=0,this.state=0,this.lastStateChange=0,this.stepsTaken=0,this.equiptment=0,this.render=function(){var t=48*((this.x-u.x)/64-(this.z-u.z)/64)+750,e=24*((this.x-u.x)/64+(this.z-u.z)/64)+250-(this.y-u.y);o.drawImage(y,0,188,97,98,t,e,97,98)},this.update=function(){if(0==this.state){for(var t=l.getTileAtPosition(this.x,this.y-h,this.z);!t.solid;)this.y-=h,t=l.getTileAtPosition(this.x,this.y-h,this.z);this.state=1}else if(1==this.state){var t=l.getTileAtPosition(this.x,this.y-2,this.z);if(!t.solid)return this.y-=8,void(u.y-=8);if(Date.now()-this.lastStateChange>100){if(p.key1&&(this.equiptment=0),p.key2&&(this.equiptment=1),p.key3&&(this.equiptment=2),p.key4&&(this.equiptment=3),p.key5&&(this.equiptment=4),p.j)if(console.log(this.equiptment),0==this.equiptment){var t=l.getTileAtPosition(this.x,this.y-2,this.z);if(console.log(t),t)return console.log("set tile"),t.type=3,t.solid=0,this.state=1,void(this.lastStateChange=Date.now())}else{var t=l.getTileAtPosition(this.x,this.y,this.z);if(t){switch(this.equiptment){case 1:t.type=1;break;case 2:t.type=2;break;case 3:t.type=4;break;case 4:t.type=5}return t.solid=1,this.state=1,void(this.lastStateChange=Date.now())}}if(p.s?(this.vz=1,this.vx=0,this.vy=1):p.w?(this.vz=-1,this.vx=0,this.vy=1):p.d?(this.vz=0,this.vx=1,this.vy=1):p.a&&(this.vz=0,this.vx=-1,this.vy=1),p.s||p.w||p.d||p.a){var t=l.getTileAtPosition(this.x+this.vx*r,this.y,this.z+this.vz*r);t.solid?(t=l.getTileAtPosition(t.x,t.y+h,t.z)).solid?(this.vz=0,this.vy=0,this.vx=0):this.state=3:this.state=2}}}else 2==this.state?(this.x+=this.vx*r/8,this.z+=this.vz*r/8,u.x+=this.vx*r/8,u.z+=this.vz*r/8,this.y+=8*this.vy,this.stepsTaken++,4==this.stepsTaken&&(this.vy=-1),8==this.stepsTaken&&(this.state=1,this.stepsTaken=0,this.lastStateChange=Date.now())):3==this.state&&(this.x+=this.vx*r/8,this.z+=this.vz*r/8,u.x+=this.vx*r/8,u.z+=this.vz*r/8,u.y+=h/8,this.stepsTaken<4?this.y+=this.vy*h/2:this.stepsTaken>=4&&(this.y-=this.vy*h/4),this.stepsTaken++,8==this.stepsTaken&&(this.state=1,this.stepsTaken=0,this.lastStateChange=Date.now()))}},u={x:0,y:240,z:0,update:function(){p.up&&(this.z+=4),p.down&&(this.z-=4),p.left&&(this.x-=4),p.right&&(this.x+=4)}},p={w:!1,a:!1,s:!1,d:!1,r:!1,f:!1,j:!1,up:!1,down:!1,left:!1,right:!1,key1:!1,key2:!1,key3:!1,key4:!1,key5:!1,key6:!1,key7:!1,key8:!1};function v(){this.x=0,this.y=288,this.z=0,this.type=0,this.solid=!1,this.render=function(){var t=48*((this.x-u.x)/64-(this.z-u.z)/64)+750,e=24*((this.x-u.x)/64+(this.z-u.z)/64)+250-(this.y-u.y);0==this.type&&o.drawImage(y,0,188,97,98,t,e,97,98),1==this.type&&o.drawImage(y,200,188,97,98,t,e,97,98),2==this.type&&o.drawImage(y,400,188,97,98,t,e,97,98),4==this.type&&o.drawImage(y,600,188,97,98,t,e,97,98),5==this.type&&o.drawImage(y,800,188,97,98,t,e,97,98)}}document.addEventListener("keydown",function(t){switch(console.log(t.keyCode),t.keyCode){case 87:p.w=!0;break;case 65:p.a=!0;break;case 83:p.s=!0;break;case 68:p.d=!0;break;case 82:p.r=!0;break;case 70:p.f=!0;break;case 74:p.j=!0;break;case 38:p.up=!0;break;case 40:p.down=!0;break;case 37:p.left=!0;break;case 39:p.right=!0;break;case 49:p.key1=!0;break;case 50:p.key2=!0;break;case 51:p.key3=!0;break;case 52:p.key4=!0;break;case 53:p.key5=!0;break;case 54:p.key6=!0;break;case 55:p.key7=!0;break;case 56:p.key8=!0}}),document.addEventListener("keyup",function(t){switch(t.keyCode){case 87:p.w=!1;break;case 65:p.a=!1;break;case 83:p.s=!1;break;case 68:p.d=!1;break;case 82:p.r=!1;break;case 70:p.f=!1;break;case 74:p.j=!1;break;case 38:p.up=!1;break;case 40:p.down=!1;break;case 37:p.left=!1;break;case 39:p.right=!1;break;case 49:p.key1=!1;break;case 50:p.key2=!1;break;case 51:p.key3=!1;break;case 52:p.key4=!1;break;case 53:p.key5=!1;break;case 54:p.key6=!1;break;case 55:p.key7=!1;break;case 56:p.key8=!1}}),function t(){k.update(),u.update(),o.clearRect(0,0,n.width,n.height),o.fillStyle="#6565ff",o.fillRect(0,0,1600,1200),function(){for(var t=l.getRenderData(),e=!1,s=0;s<t.length;s++)t[s].render(),k.z==t[s].z&&k.y==t[s].y&&k.x==t[s].x&&(k.render(),e=!0);e||k.render()}(),setTimeout(t,1e3/60)}()}]);